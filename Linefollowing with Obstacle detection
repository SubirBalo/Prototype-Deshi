// Define pins for motor driver
const int in1Pin = 11;
const int in2Pin = 10;
const int in3Pin = 13;
const int in4Pin = 12;
const int enA = 5;
const int enB = 6;
// Define pins for ultrasonic sensor
const int trigPin = 2;
const int echoPin = 3;
// Define pins for IR sensor
const int leftsensorPin = 8;
const int rightsensorPin = 7;
// Define variables for ultrasonic sensor
long duration;
int distance;
int motorSpeed =120;

void forward() {
 digitalWrite(in1Pin, LOW);
 digitalWrite(in2Pin, HIGH);
 digitalWrite(in3Pin, LOW);
 digitalWrite(in4Pin, HIGH);
}
void forwardU() {
 analogWrite(enA, motorSpeed);
 analogWrite(enB,motorSpeed );
 digitalWrite(in1Pin, LOW);
 digitalWrite(in2Pin, HIGH);
 digitalWrite(in3Pin, LOW);
 digitalWrite(in4Pin, HIGH);
}
void left() {
 analogWrite(enA, motorSpeed);
 analogWrite(enB,motorSpeed );
 digitalWrite(in1Pin, LOW);
 digitalWrite(in2Pin, HIGH);
 digitalWrite(in3Pin, HIGH);
 digitalWrite(in4Pin, LOW);
}
void stop() {
 digitalWrite(in1Pin, LOW);
 digitalWrite(in2Pin, LOW);
 digitalWrite(in3Pin, LOW);
 digitalWrite(in4Pin, LOW);
}
void right() {
 analogWrite(enA, motorSpeed);
 analogWrite(enB,motorSpeed );
 digitalWrite(in1Pin, HIGH);
 digitalWrite(in2Pin, LOW);
 digitalWrite(in3Pin, LOW);
 digitalWrite(in4Pin, HIGH);
}
void turn() {
 analogWrite(enA, 0);
 analogWrite(enB,100 );
 digitalWrite(in1Pin, LOW);
 digitalWrite(in2Pin, LOW);
 digitalWrite(in3Pin, LOW);
 digitalWrite(in4Pin, HIGH);
}
void setup() {
 // Initialize motor driver pins
 pinMode(in1Pin, OUTPUT);
 pinMode(in2Pin, OUTPUT);
 pinMode(in3Pin, OUTPUT);
 pinMode(in4Pin, OUTPUT);
 pinMode(enA, OUTPUT);
 pinMode(enB, OUTPUT);
 // Initialize ultrasonic sensor pins
 pinMode(trigPin, OUTPUT);
 pinMode(echoPin, INPUT);
 // Initialize IR sensor pin
 pinMode(leftsensorPin, INPUT);
 pinMode(rightsensorPin, INPUT);
 // Set initial speed for both motors
 analogWrite(enA, motorSpeed);
 analogWrite(enB,motorSpeed );
}
void loop() {
 // Read IR sensor input
 int leftsensorValue = digitalRead(leftsensorPin);
 int rightsensorValue = digitalRead(rightsensorPin);
analogWrite(enA, motorSpeed);
 analogWrite(enB,motorSpeed );
 if (leftsensorValue == 0 && rightsensorValue == 0) {
 forward();
 } else if (leftsensorValue == 1 && rightsensorValue == 0) {
 right();
 } else if (leftsensorValue == 0 && rightsensorValue == 1) {
 left();

 }
 // Ultrasonic sensor code
 digitalWrite(trigPin, LOW);
 delayMicroseconds(2);
 digitalWrite(trigPin, HIGH);
 delayMicroseconds(7);
 digitalWrite(trigPin, LOW);
 duration = pulseIn(echoPin, HIGH);
 distance = duration/34.2;
 if(distance==0){
 distance=100;
 }
 if(distance<20)
 {
 left();
 delay(900);
 forward();
 delay(1400);
 right();
 delay(1200);
 forwardU();
 leftsensorValue = digitalRead(leftsensorPin);
 rightsensorValue = digitalRead(rightsensorPin);

while(leftsensorValue == 0 && rightsensorValue == 0 ){
 leftsensorValue = digitalRead(leftsensorPin);
rightsensorValue = digitalRead(rightsensorPin);
}
 stop();
 delay(2000);
 forwardU();
 delay(100);
 rightsensorValue = digitalRead(rightsensorPin);
 turn();
 while(rightsensorValue == 0){
 rightsensorValue = digitalRead(rightsensorPin);
}
}
}
